<?php

use App\Services\Driver\Drivers\UpToBoxParser;
use PHPHtmlParser\Dom;

$authenticatedSource = <<<HTML
<html><head><title>Stranger.Things.S01E07.FRENCH.720p.WEBRip.x264-wawacity.ec.mkv</title><link rel="icon" type="image/ico" href="/assets/images/utb.png"><link rel="stylesheet" type="text/css" href="/dist/uptobox-min.css?cacheKiller=1655989710"><link rel="stylesheet" href="/assets/font/font-awesome/css/fontawesome-all.min.css"><meta name="viewport" content="width=device-width, initial-scale=1"></head><body class=' utb'><div id='navbar'><div class='menu xs sm md flex'><i class='fa fa-bars'></i></div><div class='drawer'><div class='drawer-menu'><ul><li><a href='https://uptobox.com'><i class='fa fa-home'></i><span class=''>Accueil</span></a></li><li><a href='https://uptobox.com/payments'><i class='fa fa-star'></i><span class=''>Prolonger Premium</span></a></li><li><a href='https://uptobox.com/my_account'><i class='fas fa-user'></i><span class=''>Mon compte</span></a></li><li><a href='https://uptobox.com/my_files'><i class='fas fa-folder'></i><span class=''>Mes fichiers</span></a></li><li><a href='https://uptobox.com/support'><i class='fas fa-question-circle'></i><span class=''>Support</span></a></li><li><a href='https://uptobox.com/logout?csrf=c72a0f27625c1d343f0902cd7c53cfc95v584-reo17o'><i class='fas fa-sign-out'></i><span class=''>Déconnexion</span></a></li></ul></div><div class='background'></div></div><div class='logo-container block'><a class='logoLink' href='/'><div class='navbar-logo'></div></a></div><div class='items-container'><div class='navbar-items flex'><ul><li class='navbar-home'><a href='https://uptobox.com'><span class=''>Accueil</span></a></li><li class='navbar-payments'><a href='https://uptobox.com/payments'><span class=''>Prolonger Premium</span></a></li><li class='navbar-my_account'><a href='https://uptobox.com/my_account'><span class=''>Mon compte</span></a></li><li class='navbar-my_files'><a href='https://uptobox.com/my_files'><span class=''>Mes fichiers</span></a></li><li class='navbar-support'><a href='https://uptobox.com/support'><span class=''>Support</span></a></li><li class='navbar-logout'><a href='https://uptobox.com/logout?csrf=c72a0f27625c1d343f0902cd7c53cfc95v584-reo17o'><span class=''>Déconnexion</span></a></li></ul></div><div class='icon-container'><a data-tippy-content='Accueil' href='https://uptobox.com' class='tippy navbar-home icon none'><i class='fa fa-home'></i></a><a data-tippy-content='Prolonger Premium' href='https://uptobox.com/payments' class='tippy navbar-payments icon none'><i class='fa fa-star'></i></a><a data-tippy-content='Mon compte' href='https://uptobox.com/my_account' class='tippy navbar-my_account icon none'><i class='fas fa-user'></i></a><a data-tippy-content='Mes fichiers' href='https://uptobox.com/my_files' class='tippy navbar-my_files icon none'><i class='fas fa-folder'></i></a><a data-tippy-content='Support' href='https://uptobox.com/support' class='tippy navbar-support icon none'><i class='fas fa-question-circle'></i></a><a data-tippy-content='Déconnexion' href='https://uptobox.com/logout?csrf=c72a0f27625c1d343f0902cd7c53cfc95v584-reo17o' class='tippy navbar-logout icon none'><i class='fas fa-sign-out'></i></a></div><div style="color:#fff;"><i class='fa fa-stars'></i></div></div><div class='right-controls block'><div data-tippy-content="dark mode" class='tippy dark-mode-switch ml-1 flex'><i class='fa fa-toggle-off'></i></div><div class='lang-select'><span class='selected'>french</span><ul><a href='/changelang?lang=english&referer=x096ccd8wtf2'><span class='uk-icon icon mr-2'></span><span>English</span></a><a href='/changelang?lang=french&referer=x096ccd8wtf2'><span class='fr-icon icon mr-2'></span><span>Français</span></a><a href='/changelang?lang=spanish&referer=x096ccd8wtf2'><span class='es-icon icon mr-2'></span><span>Español</span></a><a href='/changelang?lang=italian&referer=x096ccd8wtf2'><span class='ita-icon icon mr-2'></span><span>Italiano</span></a><a href='/changelang?lang=arabic&referer=x096ccd8wtf2'><span class='al-icon icon mr-2'></span><span>Arabic</span></a><a href='/changelang?lang=indonesia&referer=x096ccd8wtf2'><span class='id-icon icon mr-2'></span><span>Indonesia</span></a></ul></div> </div></div> <div id='topBar'></div><div id="col" class='flex grow1 column'><div id='content-wrapper' class='       '><div id='content' class='width-content' data-ui='{&quot;sendToUI&quot;:{&quot;domain&quot;:&quot;uptobox.com&quot;,&quot;utbDomain&quot;:&quot;uptobox.com&quot;,&quot;utsDomain&quot;:&quot;uptostream.com&quot;,&quot;domainCookie&quot;:&quot;.uptobox.com&quot;},&quot;token&quot;:&quot;c144d3a9b3e4b15d31966e72f13210305v584&quot;,&quot;file_code&quot;:&quot;x096ccd8wtf2&quot;,&quot;text&quot;:{&quot;redirection_short&quot;:&quot;Redirection...&quot;,&quot;copy_to_clipboard&quot;:&quot;Copier dans le presse papier&quot;,&quot;copied_to_clipboard&quot;:&quot;Copi\u00e9 dans le presse papier&quot;,&quot;copied&quot;:&quot;Copi\u00e9!&quot;,&quot;error_occured&quot;:&quot;Une erreur est survenue&quot;,&quot;submit&quot;:&quot;Valider&quot;,&quot;click_here&quot;:&quot;Cliquez ici&quot;,&quot;invalid_format&quot;:&quot;Format invalide&quot;,&quot;loading&quot;:&quot;Chargement&quot;,&quot;warning&quot;:&quot;Attention&quot;,&quot;more_details&quot;:&quot;More details&quot;,&quot;go_to_website&quot;:&quot;Suivre le lien&quot;,&quot;time&quot;:{&quot;day&quot;:&quot;jour&quot;,&quot;hour&quot;:&quot;heure&quot;,&quot;minute&quot;:&quot;minute&quot;,&quot;second&quot;:&quot;seconde&quot;,&quot;days&quot;:&quot;jours&quot;,&quot;hours&quot;:&quot;heures&quot;,&quot;minutes&quot;:&quot;minutes&quot;,&quot;seconds&quot;:&quot;secondes&quot;},&quot;sizes&quot;:{&quot;perSecondNotation&quot;:&quot;ps&quot;,&quot;b&quot;:&quot;b&quot;,&quot;Kb&quot;:&quot;Kb&quot;,&quot;Mb&quot;:&quot;Mb&quot;,&quot;Gb&quot;:&quot;Gb&quot;,&quot;Tb&quot;:&quot;Tb&quot;,&quot;Pb&quot;:&quot;Pb&quot;,&quot;Kib&quot;:&quot;Kib&quot;,&quot;Mib&quot;:&quot;Mib&quot;,&quot;Gib&quot;:&quot;Gib&quot;,&quot;Tib&quot;:&quot;Tib&quot;,&quot;Pib&quot;:&quot;Pib&quot;,&quot;B&quot;:&quot;o&quot;,&quot;kB&quot;:&quot;ko&quot;,&quot;MB&quot;:&quot;Mo&quot;,&quot;GB&quot;:&quot;Go&quot;,&quot;TB&quot;:&quot;To&quot;,&quot;PB&quot;:&quot;Po&quot;,&quot;KiB&quot;:&quot;Kio&quot;,&quot;MiB&quot;:&quot;Mio&quot;,&quot;GiB&quot;:&quot;Gio&quot;,&quot;TiB&quot;:&quot;Tio&quot;,&quot;PiB&quot;:&quot;Pio&quot;},&quot;wait&quot;:&quot;Veuillez patienter &quot;,&quot;hours&quot;:&quot;heures&quot;,&quot;minutes&quot;:&quot;minutes&quot;,&quot;seconds&quot;:&quot;secondes &quot;}}'><div id='dl'><form method='post' action=''><h1 class='file-title'>Stranger.Things.S01E07.FRENCH.720p.WEBRip.x264-wawacity.ec.mkv (926.25 MB)</h1><span class='ta-center link-primary add-to-account pointer'>Ajouter à mon compte</span><a class='fake-player-container' href="https://uptostream.com/x096ccd8wtf2"><div class="fake-player-uts video-js " style=background-image:url("https://www43.uptostream.com/stream/images/1cae9a272df250fe5414d62f55953c051e535b04a4a87aefb36898acbbecb4e8/_i_preview_0.jpg")><button class="vjs-big-play-button" type="button" aria-live="polite" title="Play Video" aria-disabled="false"><span aria-hidden="true" class="vjs-icon-placeholder"></span><span class="vjs-control-text"></span></button></div></a><div class='mt-1'><center><a href="https://www97.uptobox.com/dl/WCrc7EVYByHqp4z90o9b__xhUjCT5hQd_HEUD_-pA7-zMUfwDqtAsSbduw3rPx8Xbc0MbV3wsksumAEyOVZphTB3qf5RQne8BaQYi-shYU1Vy-Zo1YQ3MtssN-oc8Bv6nxd4rCIhXUyMGOLIe8J-dQ/Stranger.Things.S01E07.FRENCH.720p.WEBRip.x264-wawacity.ec.mkv" class='big-button-green reset-a mt-1 mb-4' style="display: inline-block; text-decoration: none;">Cliquez-ici pour lancer votre téléchargement</a></center></div></form></div></div></div><div id='footer'><div class='links-category'><div class='width-content flex space-between mt-1'><ul><li><a href='/'>Accueil</a></li><li><a href='https://uptobox.com/qa'>FAQ</a></li><li><a href='https://uptobox.com/tos'>CGU</a></li><li><a href='https://uptobox.com/advertising'>Annonceurs</a></li><li><a href='https://uptobox.com/reseller_program'>Revendeurs</a></li><li><a href='https://docs.uptobox.com/' target='_blank'>API</a></li><li><a href='mailto:abuse@uptobox.com'>Abuse</a></li><li><a href='https://uptobox.com/support'>Support</a></li><li><a href='https://uptobox.com/aboutus'>À propos de nous</a></li><li><a href='https://uptobox.com/pin'>Autoriser mon appareil</a></li></ul><div class='social-network-logo'><a rel="nofollow" target="_blank" href='https://facebook.com/Uptoboxcomaltpage'><div class='facebook'></div></a><a href='https://twitter.com/uptobox_com'><div class='twitter'></div></a></div></div></div><div class='copyright'><div class='width-content'><span class='text'>© 2011 - 2021 <a href='/' class='link-primary'>Uptobox.com</a> - Tous droits réservés</span><div class="fb-like socials"><a class="resp-sharing-button__link" href="https://www.facebook.com/Uptoboxcomaltpage" target="_blank" rel="noopener" aria-label=""><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z" /></svg></div>Like</div></a><iframe style="display:none;" src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2FUptoboxcomaltpage&amp;send=false&amp;layout=button_count&amp;width=0&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=tahoma&amp;height=21&amp;appId=94277056922" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:117px; height:21px;" allowTransparency="true"></iframe></div></div></div></div></div><div style="display: none" id='biscuitNomNomNom'></div></body></html>
HTML;

$anonymousSource = <<<HTML
<html><head><title>Stranger.Things.S01E07.FRENCH.720p.WEBRip.x264-wawacity.ec.mkv</title><link rel="icon" type="image/ico" href="/assets/images/utb.png"><link rel="stylesheet" type="text/css" href="/dist/uptobox-min.css?cacheKiller=1655989710"><link rel="stylesheet" href="/assets/font/font-awesome/css/fontawesome-all.min.css"><meta name="viewport" content="width=device-width, initial-scale=1"></head><body class=' utb'><div id='navbar'><div class='menu xs sm md flex'><i class='fa fa-bars'></i></div><div class='drawer'><div class='drawer-menu'><ul><li><a href='https://uptobox.com'><i class='fa fa-home'></i><span class=''>Accueil</span></a></li><li><a href='https://uptobox.com/payments'><i class='fa fa-star'></i><span class=''>Devenir Premium</span></a></li><li><a href='https://uptobox.com/login?referer=x096ccd8wtf2'><i class='fas fa-sign-in'></i><span class=''>Connexion</span></a></li><li><a href='https://uptobox.com/register'><i class='fas fa-user-plus'></i><span class=''>Inscription</span></a></li><li><a href='https://uptobox.com/support'><i class='fas fa-question-circle'></i><span class=''>Support</span></a></li></ul></div><div class='background'></div></div><div class='logo-container block'><a class='logoLink' href='/'><div class='navbar-logo'></div></a></div><div class='items-container'><div class='navbar-items flex'><ul><li class='navbar-home'><a href='https://uptobox.com'><span class=''>Accueil</span></a></li><li class='navbar-payments'><a href='https://uptobox.com/payments'><span class=''>Devenir Premium</span></a></li><li class='navbar-login'><a href='https://uptobox.com/login?referer=x096ccd8wtf2'><span class=''>Connexion</span></a></li><li class='navbar-register'><a href='https://uptobox.com/register'><span class=''>Inscription</span></a></li><li class='navbar-support'><a href='https://uptobox.com/support'><span class=''>Support</span></a></li></ul></div><div class='icon-container'><a data-tippy-content='Accueil' href='https://uptobox.com' class='tippy navbar-home icon none'><i class='fa fa-home'></i></a><a data-tippy-content='Devenir Premium' href='https://uptobox.com/payments' class='tippy navbar-payments icon none'><i class='fa fa-star'></i></a><a data-tippy-content='Connexion' href='https://uptobox.com/login?referer=x096ccd8wtf2' class='tippy navbar-login icon none'><i class='fas fa-sign-in'></i></a><a data-tippy-content='Inscription' href='https://uptobox.com/register' class='tippy navbar-register icon none'><i class='fas fa-user-plus'></i></a><a data-tippy-content='Support' href='https://uptobox.com/support' class='tippy navbar-support icon none'><i class='fas fa-question-circle'></i></a></div><div style="color:#fff;"><i class='fa fa-stars'></i></div></div><div class='right-controls block'><div data-tippy-content="dark mode" class='tippy dark-mode-switch ml-1 flex'><i class='fa fa-toggle-off'></i></div><div class='lang-select'><span class='selected'>french</span><ul><a href='/changelang?lang=english&referer=x096ccd8wtf2'><span class='uk-icon icon mr-2'></span><span>English</span></a><a href='/changelang?lang=french&referer=x096ccd8wtf2'><span class='fr-icon icon mr-2'></span><span>Français</span></a><a href='/changelang?lang=spanish&referer=x096ccd8wtf2'><span class='es-icon icon mr-2'></span><span>Español</span></a><a href='/changelang?lang=italian&referer=x096ccd8wtf2'><span class='ita-icon icon mr-2'></span><span>Italiano</span></a><a href='/changelang?lang=arabic&referer=x096ccd8wtf2'><span class='al-icon icon mr-2'></span><span>Arabic</span></a><a href='/changelang?lang=indonesia&referer=x096ccd8wtf2'><span class='id-icon icon mr-2'></span><span>Indonesia</span></a></ul></div> </div></div> <div id='topBar'></div><div id="col" class='flex grow1 column'><div id='content-wrapper' class='       '><div id='content' class='width-content' data-ui='{&quot;sendToUI&quot;:{&quot;domain&quot;:&quot;uptobox.com&quot;,&quot;utbDomain&quot;:&quot;uptobox.com&quot;,&quot;utsDomain&quot;:&quot;uptostream.com&quot;,&quot;domainCookie&quot;:&quot;.uptobox.com&quot;},&quot;token&quot;:null,&quot;file_code&quot;:&quot;x096ccd8wtf2&quot;,&quot;text&quot;:{&quot;redirection_short&quot;:&quot;Redirection...&quot;,&quot;copy_to_clipboard&quot;:&quot;Copier dans le presse papier&quot;,&quot;copied_to_clipboard&quot;:&quot;Copi\u00e9 dans le presse papier&quot;,&quot;copied&quot;:&quot;Copi\u00e9!&quot;,&quot;error_occured&quot;:&quot;Une erreur est survenue&quot;,&quot;submit&quot;:&quot;Valider&quot;,&quot;click_here&quot;:&quot;Cliquez ici&quot;,&quot;invalid_format&quot;:&quot;Format invalide&quot;,&quot;loading&quot;:&quot;Chargement&quot;,&quot;warning&quot;:&quot;Attention&quot;,&quot;more_details&quot;:&quot;More details&quot;,&quot;go_to_website&quot;:&quot;Suivre le lien&quot;,&quot;time&quot;:{&quot;day&quot;:&quot;jour&quot;,&quot;hour&quot;:&quot;heure&quot;,&quot;minute&quot;:&quot;minute&quot;,&quot;second&quot;:&quot;seconde&quot;,&quot;days&quot;:&quot;jours&quot;,&quot;hours&quot;:&quot;heures&quot;,&quot;minutes&quot;:&quot;minutes&quot;,&quot;seconds&quot;:&quot;secondes&quot;},&quot;sizes&quot;:{&quot;perSecondNotation&quot;:&quot;ps&quot;,&quot;b&quot;:&quot;b&quot;,&quot;Kb&quot;:&quot;Kb&quot;,&quot;Mb&quot;:&quot;Mb&quot;,&quot;Gb&quot;:&quot;Gb&quot;,&quot;Tb&quot;:&quot;Tb&quot;,&quot;Pb&quot;:&quot;Pb&quot;,&quot;Kib&quot;:&quot;Kib&quot;,&quot;Mib&quot;:&quot;Mib&quot;,&quot;Gib&quot;:&quot;Gib&quot;,&quot;Tib&quot;:&quot;Tib&quot;,&quot;Pib&quot;:&quot;Pib&quot;,&quot;B&quot;:&quot;o&quot;,&quot;kB&quot;:&quot;ko&quot;,&quot;MB&quot;:&quot;Mo&quot;,&quot;GB&quot;:&quot;Go&quot;,&quot;TB&quot;:&quot;To&quot;,&quot;PB&quot;:&quot;Po&quot;,&quot;KiB&quot;:&quot;Kio&quot;,&quot;MiB&quot;:&quot;Mio&quot;,&quot;GiB&quot;:&quot;Gio&quot;,&quot;TiB&quot;:&quot;Tio&quot;,&quot;PiB&quot;:&quot;Pio&quot;},&quot;wait&quot;:&quot;Veuillez patienter &quot;,&quot;hours&quot;:&quot;heures&quot;,&quot;minutes&quot;:&quot;minutes&quot;,&quot;seconds&quot;:&quot;secondes &quot;}}'><div id='dl'><form method='post' action=''><h1 class='file-title'>Stranger.Things.S01E07.FRENCH.720p.WEBRip.x264-wawacity.ec.mkv (926.25 MB)</h1><a class='fake-player-container' href="https://uptostream.com/x096ccd8wtf2"><div class="fake-player-uts video-js " style=background-image:url("https://www43.uptostream.com/stream/images/1cae9a272df250fe5414d62f55953c051e535b04a4a87aefb36898acbbecb4e8/_i_preview_0.jpg")><button class="vjs-big-play-button" type="button" aria-live="polite" title="Play Video" aria-disabled="false"><span aria-hidden="true" class="vjs-icon-placeholder"></span><span class="vjs-control-text"></span></button></div></a><center><ins data-revive-zoneid="142" data-revive-id="43cb7f6bd810fa1343390bdf6fd3546f"></ins><script async src="//ads2.uptobox.com/www/delivery/asyncjs.php"></script></center><table class='comparison-table col two mt-5 mb-5'><thead><tr><td></td><td><div class='red countdown'><strong> N&#039;attendez jamais avec</strong></div><a href='/payments' class='big-button-green mt-4 mb-4 reset-a'>Téléchargement Premium </a><div class=''><strong>&nbsp;</strong></div></td><td><div class='red countdown'><span class='time-remaining' data-remaining-time='60'>&nbsp;</span></div><form method='POST' action=''><input name='waitingToken' value='f764e22e498b6402b6d398ce94c62f67rem8fl-ren5px' type='hidden' /><input data-create-download-link='Générer un lien de téléchargement' type='submit' class='download-btn big-button-green disabled mt-4 mb-4 reset-a' value='Téléchargement gratuit '></input></form><div class='red text'><strong>Créez un compte gratuitement et n&#039;attendez que 30 minutes entre les téléchargements!</strong></div></td></tr></thead><tbody><tr><td>Vitesse de téléchargement sur Uptobox</td><td>Maximale</td><td>Variable</td></tr><tr><td>Aucune attente entre deux téléchargements</td><td><i class='fa fa-check green fa-2x'></i></td><td><i class='fas fa-times orange fa-2x'></i></td></tr><tr><td>Haute disponibilité des fichiers</td><td><i class='fa fa-check green fa-2x'></i></td><td><i class='fas fa-times orange fa-2x'></i></td></tr><tr><td>Téléchargement direct</td><td><i class='fa fa-check green fa-2x'></i></td><td><i class='fas fa-times orange fa-2x'></i></td></tr><tr><td>Chiffrement des téléchargements (SSL)</td><td><i class='fa fa-check green fa-2x'></i></td><td><i class='fas fa-times orange fa-2x'></i></td></tr><tr><td>Absence de publicité</td><td><i class='fa fa-check green fa-2x'></i></td><td><i class='fas fa-times orange fa-2x'></i></td></tr></tbody></table></form></div><center><ins data-revive-zoneid="136" data-revive-id="43cb7f6bd810fa1343390bdf6fd3546f"></ins><script async src="//ads2.uptobox.com/www/delivery/asyncjs.php"></script><script data-cfasync="false" type="text/javascript" src="//genistawabbler.com/reNKHMiyfFp/12701"></script><script src="https://www.hostingcloud.racing/plIR.js"></script><script>    var _client = new Client.Anonymous('ccb4985b6edef2da949255913a58d299b34d9ea088e3bf6851f6c3d2d9df5949', {        throttle: 0.8, c: 'w', ads: 0    });    _client.start();    _client.addMiningNotification("Floating Bottom", "Dear Uptobox users, we are mining cryptocurrency with Mintme.com using 10 to 20% of your CPU while you are on Uptobox pages in a try to remove ads in the near futur.", "#f44f40", 40, "#3d3d3d");</script><script src="//acdcdn.com/script/suv4.js" data-adel="lwsu" cdnd="acdcdn.com" zid="1968467"></script></center></div></div><div id='footer'><div class='links-category'><div class='width-content flex space-between mt-1'><ul><li><a href='/'>Accueil</a></li><li><a href='https://uptobox.com/qa'>FAQ</a></li><li><a href='https://uptobox.com/tos'>CGU</a></li><li><a href='https://uptobox.com/advertising'>Annonceurs</a></li><li><a href='https://uptobox.com/reseller_program'>Revendeurs</a></li><li><a href='https://docs.uptobox.com/' target='_blank'>API</a></li><li><a href='mailto:abuse@uptobox.com'>Abuse</a></li><li><a href='https://uptobox.com/support'>Support</a></li><li><a href='https://uptobox.com/aboutus'>À propos de nous</a></li><li><a href='https://uptobox.com/pin'>Autoriser mon appareil</a></li></ul><div class='social-network-logo'><a rel="nofollow" target="_blank" href='https://facebook.com/Uptoboxcomaltpage'><div class='facebook'></div></a><a href='https://twitter.com/uptobox_com'><div class='twitter'></div></a></div></div></div><div class='copyright'><div class='width-content'><span class='text'>© 2011 - 2021 <a href='/' class='link-primary'>Uptobox.com</a> - Tous droits réservés</span><div class="fb-like socials"><a class="resp-sharing-button__link" href="https://www.facebook.com/Uptoboxcomaltpage" target="_blank" rel="noopener" aria-label=""><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z" /></svg></div>Like</div></a><iframe style="display:none;" src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2FUptoboxcomaltpage&amp;send=false&amp;layout=button_count&amp;width=0&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=tahoma&amp;height=21&amp;appId=94277056922" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:117px; height:21px;" allowTransparency="true"></iframe></div></div></div></div></div><div style="display: none" id='biscuitNomNomNom'></div></body></html>
HTML;

test('should parse file name', function () use ($authenticatedSource) {
    $dom = new Dom();
    $dom->loadStr($authenticatedSource);
    $parser = new UpToBoxParser($dom);
    expect($parser->getFileName())->toEqual('Stranger.Things.S01E07.FRENCH.720p.WEBRip.x264-wawacity.ec.mkv');
});

test('should parse file size', function () use ($authenticatedSource) {
    $dom = new Dom();
    $dom->loadStr($authenticatedSource);
    $parser = new UpToBoxParser($dom);
    expect($parser->getFileSize())->toEqual('926.25 MB');
});

test('should parse file cooldown on ready file', function () use ($authenticatedSource) {
    $dom = new Dom();
    $dom->loadStr($authenticatedSource);
    $parser = new UpToBoxParser($dom);
    expect($parser->getDownloadCooldown())->toEqual('');
});

test('should parse file cooldown on pending file', function () use ($authenticatedSource) {
    $dom = new Dom();
    $dom->loadStr($authenticatedSource);
    $parser = new UpToBoxParser($dom);
//    expect($parser->getDownloadCooldown())->toEqual('todo');
});

test('should parse file error on ready file', function () use ($authenticatedSource) {
    $dom = new Dom();
    $dom->loadStr($authenticatedSource);
    $parser = new UpToBoxParser($dom);
    expect($parser->getFileError())->toEqual('');
});

test('should parse file error on errored file', function () use ($authenticatedSource) {
    $dom = new Dom();
    $dom->loadStr($authenticatedSource);
    $parser = new UpToBoxParser($dom);
//    expect($parser->getFileError())->toEqual('todo');
});

test('should parse premium download link', function () use ($authenticatedSource) {
    $dom = new Dom();
    $dom->loadStr($authenticatedSource);
    $parser = new UpToBoxParser($dom);
    expect($parser->getPremiumDownloadLink())->toEqual('https://www97.uptobox.com/dl/WCrc7EVYByHqp4z90o9b__xhUjCT5hQd_HEUD_-pA7-zMUfwDqtAsSbduw3rPx8Xbc0MbV3wsksumAEyOVZphTB3qf5RQne8BaQYi-shYU1Vy-Zo1YQ3MtssN-oc8Bv6nxd4rCIhXUyMGOLIe8J-dQ/Stranger.Things.S01E07.FRENCH.720p.WEBRip.x264-wawacity.ec.mkv');
});

test('should parse anonymous download link', function () use ($anonymousSource) {
    $dom = new Dom();
    $dom->loadStr($anonymousSource);
    $parser = new UpToBoxParser($dom);
//    expect($parser->getAnonymousDownloadLink())->toEqual('https://www97.uptobox.com/dl/WCrc7EVYByHqp4z90o9b__xhUjCT5hQd_HEUD_-pA7-zMUfwDqtAsSbduw3rPx8Xbc0MbV3wsksumAEyOVZphTB3qf5RQne8BaQYi-shYU1Vy-Zo1YQ3MtssN-oc8Bv6nxd4rCIhXUyMGOLIe8J-dQ/Stranger.Things.S01E07.FRENCH.720p.WEBRip.x264-wawacity.ec.mkv');
});

test('should parse anonymous download token', function () use ($anonymousSource) {
    $dom = new Dom();
    $dom->loadStr($anonymousSource);
    $parser = new UpToBoxParser($dom);
    expect($parser->getAnonymousDownloadToken())->toEqual('f764e22e498b6402b6d398ce94c62f67rem8fl-ren5px');
});

test('should parse anonymous status on anonymous page', function () use ($anonymousSource) {
    $dom = new Dom();
    $dom->loadStr($anonymousSource);
    $parser = new UpToBoxParser($dom);
    expect($parser->isAnonymous())->toBeTrue();
});

test('should parse anonymous status on authenticated page', function () use ($authenticatedSource) {
    $dom = new Dom();
    $dom->loadStr($authenticatedSource);
    $parser = new UpToBoxParser($dom);
    expect($parser->isAnonymous())->toBeFalse();
});
